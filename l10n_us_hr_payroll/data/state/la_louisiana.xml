<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- Wage Base -->
    <data noupdate="1">
        <record id="rule_parameter_us_la_suta_wage_base_2020" model="hr.payroll.rate">
            <field name="name">US LA Louisiana SUTA Wage Base</field>
            <field name="code">us_la_suta_wage_base</field>
            <field name="parameter_value">7700.0</field>
            <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
        </record>
    </data>

    <!-- Rate -->
    <data noupdate="1">
        <record id="rule_parameter_us_la_suta_rate_2020" model="hr.payroll.rate">
            <field name="name">US LA Louisiana SUTA Rate</field>
            <field name="code">us_la_suta_rate</field>
            <field name="parameter_value">1.14</field>
            <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
        </record>
        <record id="rule_parameter_us_la_suta_rate_2021" model="hr.payroll.rate">
            <field name="name">US LA Louisiana SUTA Rate</field>
            <field name="code">us_la_suta_rate</field>
            <field name="parameter_value">1.0</field>
            <field name="date_from" eval="datetime(2021, 1, 1).date()"/>
        </record>
    </data>
    <!-- table data from http://www.revenue.louisiana.gov/taxforms/1306(7_09)W.pdf page 9. -->
    <data noupdate="1">
        <record id="rule_parameter_us_la_sit_tax_rate_2020" model="hr.payroll.rate">
            <field name="name">US LA Louisiana SIT Tax Rate</field>
            <field name="code">us_la_sit_tax_rate</field>
            <field name="parameter_value">{
                 'single': (
                    (12500.00, 2.10),
                    (50000.00, 1.60),
                    (   'inf', 1.35)
                 ),
                 'married': (
                    ( 25000.00,  2.10),
                    (100000.00,  1.65),
                    (   'inf',   1.35)
                 ),
            }</field>
            <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
        </record>
        <record id="rule_parameter_us_la_sit_tax_rate_2021" model="hr.payroll.rate">
            <field name="name">US LA Louisiana SIT Tax Rate</field>
            <field name="code">us_la_sit_tax_rate</field>
            <field name="parameter_value">{
                 'single': (
                    (12500.00, 2.00),
                    (50000.00, 4.00),
                    (   'inf', 6.00)
                 ),
                 'married': (
                    ( 25000.00,  2.00),
                    (100000.00,  4.00),
                    (   'inf',   6.00)
                 ),
            }</field>
            <field name="date_from" eval="datetime(2021, 1, 1).date()"/>
        </record>
    </data>

    <data noupdate="1">
        <record id="rule_parameter_us_la_sit_personal_exemption_rate_2020" model="hr.payroll.rate">
            <field name="name">US LA Louisiana Personal Exemption Rate</field>
            <field name="code">us_la_sit_personal_exemption_rate</field>
            <field name="parameter_value">4500</field>
            <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
        </record>
    </data>
    
    <data noupdate="1">
        <record id="rule_parameter_us_la_sit_dependent_rate_2020" model="hr.payroll.rate">
            <field name="name">US LA Louisiana Dependent Rate</field>
            <field name="code">us_la_sit_dependent_rate</field>
            <field name="parameter_value">1000.0</field>
            <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
        </record>
    </data>

    <!-- Partners and Contribution Registers -->
    <record id="res_partner_us_la_dor" model="res.partner">
        <field name="name">US Louisiana - Workforce Commission (LWC) - Unemployment Tax</field>
        <field name="supplier">1</field>
    </record>
    <record id="contrib_register_us_la_dor" model="hr.contribution.register">
        <field name="name">US Louisiana - Workforce Commission (LWC) - Unemployment Tax</field>
        <field name="partner_id" ref="res_partner_us_la_dor"/>
    </record>

    <record id="res_partner_us_la_dor_sit" model="res.partner">
        <field name="name">US Louisiana - Department of Revenue (LDOR) - Income Tax</field>
        <field name="supplier">1</field>
    </record>
    <record id="contrib_register_us_la_dor_sit" model="hr.contribution.register">
        <field name="name">US Louisiana - Department of Revenue (LDOR) - Income Tax</field>
        <field name="partner_id" ref="res_partner_us_la_dor_sit"/>
    </record>

    <!-- Rules -->
    <record id="hr_payroll_rule_er_us_la_suta" model="hr.salary.rule">
        <field name="sequence" eval="450"/>
        <field name="category_id" ref="hr_payroll_category_er_us_suta"/>
        <field name="name">ER: US LA Louisiana State Unemployment</field>
        <field name="code">ER_US_LA_SUTA</field>
        <field name="condition_select">python</field>
        <field name="condition_python">result, _ = general_state_unemployment(payslip, categories, worked_days, inputs, wage_base='us_la_suta_wage_base', rate='us_la_suta_rate', state_code='LA')</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">result, result_rate = general_state_unemployment(payslip, categories, worked_days, inputs, wage_base='us_la_suta_wage_base', rate='us_la_suta_rate', state_code='LA')</field>
        <field name="register_id" ref="contrib_register_us_la_dor"/>
        <field name="appears_on_payslip" eval="False"/>
    </record>

    <record id="hr_payroll_rule_ee_us_la_sit" model="hr.salary.rule">
        <field name="sequence" eval="195"/>
        <field name="category_id" ref="hr_payroll_category_ee_us_sit"/>
        <field name="name">EE: US LA Louisiana State Income Tax Withholding</field>
        <field name="code">EE_US_LA_SIT</field>
        <field name="condition_select">python</field>
        <field name="condition_python">result, _ = la_louisiana_state_income_withholding(payslip, categories, worked_days, inputs)</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">result, result_rate = la_louisiana_state_income_withholding(payslip, categories, worked_days, inputs)</field>
        <field name="register_id" ref="contrib_register_us_la_dor_sit"/>
        <field name="appears_on_payslip" eval="True"/>
    </record>

</odoo>
